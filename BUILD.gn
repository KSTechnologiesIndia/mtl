# Copyright 2016 The Fuchsia Authors. All rights reserved.
# Use of this source code is governed by a BSD-style license that can be
# found in the LICENSE file.

group("mtl") {
  public_deps = [
    "//lib/mtl/data_pipe",
    "//lib/mtl/handles",
    "//lib/mtl/tasks",
    "//lib/mtl/threading",
    "//lib/mtl/vmo",
    "//lib/mtl/waiter",
  ]
}

group("mtl_with_mojo") {
  public_deps = [
    ":mtl",
    "//lib/mtl/application",
    "//lib/mtl/environment",
    "//lib/mtl/legacy_data_pipe",
    "//lib/mtl/shared_buffer",
  ]

  deps = [
    "//mojo/system:libmojo",
  ]
}

executable("mtl_unittests") {
  testonly = true

  sources = [
    "data_pipe/data_pipe_drainer_unittest.cc",
    "handles/unique_handle_unittest.cc",
    "legacy_data_pipe/data_pipe_drainer_unittest.cc",
    "shared_buffer/strings_unittest.cc",
    "shared_buffer/vector_unittest.cc",
    "tasks/message_loop_unittest.cc",
    "vmo/strings_unittest.cc",
    "vmo/vector_unittest.cc",
    "threading/create_thread_unittest.cc",
  ]

  deps = [
    ":mtl_with_mojo",
    "//lib/mtl/test",
    "//third_party/gtest",
  ]
}
